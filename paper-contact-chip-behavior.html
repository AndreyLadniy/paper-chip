<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="paper-chip-behavior.html">

<script>

  var WebPaperElem = WebPaperElem || {};

  WebPaperElem.PaperContactChipBehaviorImpl = {
    properties: {
      /**
        * Whether or not the chip support an opened state.
        * 
        * @attribute opened
        * @type boolean
        * @default false
        */
      openable: {
        type: Boolean,
        value: false,
        reflectToAttribute: true,
        notify: true
      },

      /**
        * Whether or not the chip is in its opened state.
        * 
        * @attribute opened
        * @type boolean
        * @default false
        */
      opened: {
        type: Boolean,
        value: false,
        reflectToAttribute: true,
        notify: true,
      },

      /**
        * Whether or not the chip state is "active". If `true`, the main chip
        * area will be highlighted when in the opened state.
        *
        * @attribute active
        * @type boolean
        * @default false
        */
      active: {
        type: Boolean,
        value: false,
        notify: true,
        reflectToAttribute: true
      },

      elevation: {
        type: Number,
        reflectToAttribute: true,
        computed: '_computeElevation(opened, focused, pressed, disabled, active)'
      },
    },
    
    set __opened(newValue) {
      this.opened = newValue;
    },

    get __opened() {
      return this.opened;
    },

    _computeElevation: function(opened, focused, pressed) {
      if (opened) {
        return 4;
      }

      if (focused || pressed) {
        return 1;
      }
      return 0;
    },

    listeners: {
      up: '_upAction',
      blur: '_blurAction'
    },
    
    _upAction: function() {
      if (this.openable) {
        this.toggleOpened();
      }
    },
    
    _blurAction: function() {
      this.__opened = false;
    },
      
    toggleOpened: function() {
      this.__opened = (!this.__opened);
    },
  };
  
  WebPaperElem.PaperContactChipBehavior = [ 
    WebPaperElem.PaperChipBehavior,
    WebPaperElem.PaperContactChipBehaviorImpl 
  ];

</script>